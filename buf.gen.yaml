version: v2
managed:
  enabled: true
  override:
    - file_option: go_package_prefix
      value: github.com/tinode/chat/pbx
plugins:
  # Go
  - remote: buf.build/protocolbuffers/go
    out: pbx
    opt: paths=source_relative
  - remote: buf.build/grpc/go:v1.5.1
    out: pbx
    opt:
      - paths=source_relative
    # Swift
  - remote: buf.build/apple/swift:v1.28.2
    out: Sources/TinodePbx
    include_imports: true
    opt:
      - Visibility=Public
  - remote: buf.build/grpc/swift:v1.24.2
    out: Sources/TinodePbx
    opt:
      - Client=true
      - Server=false
      - Visibility=Public